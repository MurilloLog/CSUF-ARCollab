# Local server

## NodeJs environment configuration
### Installation
NodeJs installation is done with the official installer which can be found at the address: [Node.js](https://nodejs.org/en)

Once installed, proceed with the respective verification using the commands:

```bash
node --version
```

``npm --version``

The first command should return the installed version of NodeJs, while the second command returns the version of the associated NodeJs package manager.

If both commands are recognized, you can proceed with the following steps, otherwise, the NodeJs installation path must be added to the system PATH environment variable.

Now, in the next steps, the definition of the environment will be done using `Visual Studio Code` (VSCode). Any other editor can be used, although I personally like VSCode because it makes it easier for me to integrate the rest of the modules to be used.

### Workspace configuration
As a first step for the workspace configuration, the directory where the server code and its respective configuration will be stored is created. For convenience, I call this directory "NodeJS server" and inside the directory I create two new subdirectories called "Build" and "src".

In the "src'' subdirectory, the programs associated with the server will be stored. In other hand, in the "Build" subdirectory the packages generated by the compilation process will be stored.

Finally, any file outside these two subdirectories will correspond to NodeJs configuration documents.

Now what I do is to create a Json package to list the main dependencies or modules of the project with NodeJs inside the "NodeJs server" folder. This is achieved with the instruction:

``npm init -y``

Once executed, a document called "package.json" appears in the root of the file directory. Here you will find the list of installed modules.  

### Typescript Installation
To add typescript to the project, recognize its syntax and install the compiler that translates the code to javascript, just type the following commands:

``npm i typescript ts-node-dev -D``

``npx tsc - -init``

This last command creates a new document in the project directory called "tsconfig.json" where it will be possible to configure the typescript compiler. The first change to be made in this document is in the "rootDir" and "outDir" instructions.

"rootDir" is the directory where the server code is hosted, specifically it corresponds to the folder named "src" that was previously created. The change made in this line is to first uncomment and then specify the address of that subdirectory within the project.

On the other hand, "outDir" is the directory where the compiled code is placed. This directory is the folder called "Build" created previously and a similar process to the previous one is performed.

### Server code
The server code is created inside the "src" subdirectory. For convenience, I have named this file as "Server.ts".

### Server execution
To run the server, an instruction must be added to the "package.json" document. In this document there is a section called "scripts" where we can define new commands.

In our case the following instruction is added:

``"server": "ts-node ./src/Server.ts"``

With this instruction we can now run the program written in the Server.ts document from the terminal using the following command:

``npm run server``

As shown below, if the program contains no errors, it will run like any other program. If there are any errors, the respective error will be displayed.

### Installation of typegoose
Typegoose is installed using the following commands from the VSCode terminal:

``npm install --save @typegoose/typegoose``

``npm install --save mongoose``

## MongoDB Installation
MongoDB is a non-relational database that provides the necessary tools to operate with complex documents and information.
To make use of it, it is necessary to perform an installation process of its server and client. The official documentation can be found on the MongoDB Documentation website.
MongoDB community is a free edition of MongoDB that provides the services and elements necessary to set up the MongoDB server. It is available for installation on Windows, Linux and OS X operating systems. However, this edition requires a separate client to be installed.

MongoDB community provides its own installer in which it is sufficient to specify the installation directory, the components to be installed and the plugins or additional configuration.

**Complement**
As an add-on, Compass, a graphical environment for the administration of databases designed in MongoDB, is offered as an optional extra.

#### Additional configuration
As additional configuration you are asked to specify if you want to install MongoDB as a service, that means, an additional service to the OS that is started once the computer starts. For the purposes of this project, it is not necessary to define it as a service.

#### Definition in environment variables
With MongoDB installed it is necessary to add the installation directory to the OS Path variable. This is in order to run MongoDB from any system environment or directory.

#### Running MongoDB
To run MongoDB service you need to use the command:

``mongod``

This instruction initializes the MongoDB server and notifies by means of messages the different states of the process: connections, disconnections, errors, and others.

Note: The mongod command runs in the background, so it is important not to close the command window from which the service is initialized. For any other operation, it is necessary to open a new window. This command must always be executed before compiling the Server.ts script.

Once the MongoDB service has been started with the mongod command, we can leave this service running in the background and view the connection status. Now we can open a new terminal from which to continue working.
 
When you run the mongod command from the terminal, a local server is automatically started on port 27017. If you run the Compass application (add-on described above), you can graphically connect to MongoDB.

From this application it will be possible to visualize all the changes made in the application databases.
However, it will also be necessary to program the Server.ts script to perform the same process as described below.

